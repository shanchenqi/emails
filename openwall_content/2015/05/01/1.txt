  oss-security - Re: [Pdns-announce] PowerDNS Security Advisory            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [<thread-prev] [thread-next>] [day] [month] [year] [list]  Date: Fri, 01 May From: "Peter van Dijk" <peter.van.dijk@...erdns.com> To: pdns-dev@...lman.powerdns.com,  "pdns-users Users" <pdns-users@...lman.powerdns.com>,  pdns-announce@...lman.powerdns.com, oss-security@...ts.openwall.com Subject: Re: [Pdns-announce] PowerDNS Security Advisory  Hi everybody,  Last week, we released Security Advisory with text suggesting that only specific platforms were seriously affected. We must now report that this was incorrect: all platforms are impacted. The advisory has been updated to that effect.  Furthermore, by popular demand, we have released Authoritative Server an update to version which includes DNSSEC improvements and of course a patch for the security issue. Please see for links.  Kind regards, --  Peter van Dijk PowerDNS.COM BV - https://www.powerdns.com/  On 23 Apr at Peter van Dijk wrote:  > Hi everybody, > > Please be aware of PowerDNS Security Advisory > which you > can also find below. The good news is that as far as we have seen, only > specific builds for RHEL5 are affected, but just to be sure we are doing > full releases of all recent versions of our products. > > Packages and distribution tar balls of Recursor Recursor and Auth > are available in the usual places, and release announcements will be sent > out right after this email. > > If you prefer a minimal patch, please go to > and see README.txt there. > > If you have problems upgrading, please either contact us on our mailing lists, > or privately via powerdns.support@...erdns.com (should you wish to make use of > our SLA-backed support program). > > We want to thank Aki Tuomi for finding this issue, and really digging into it. > We also want to thank Kees Monshouwer for assisting in debugging and fixing > the offending code. Finally we want to thank Kai Storbeck for putting an > earlier, broken version of the patch into production and being understanding > about the names that broke because of it. > > > PowerDNS Security Advisory Label decompression bug can cause crashes > on specific platforms > >   * CVE: >   * Date: 23rd of April >   * Credit: Aki Tuomi >   * Affects: PowerDNS Recursor versions 3.5 and up; Authoritative >     Server 3.2 and up >   * Not affected: Recursor Recursor Auth >   * Severity: High >   * Impact: Degraded service >   * Exploit: This problem can be triggered by sending queries for >     specifically configured domains >   * Risk of system compromise: No >   * Solution: Upgrade to any of the non-affected versions >   * Workaround: Run your Recursor under a supervisor. Exposure can be >     limited by configuring the allow-from setting so only trusted >     users can query your nameserver. > > A bug was discovered in our label decompression code, making it > possible for names to refer to themselves, thus causing a loop during > decompression. This loop is capped at a iterations by a failsafe, > making the issue harmless on most platforms. > > However, on specific platforms (so far, we are only aware of this > happening on RHEL5/CentOS5), the recursion involved in these steps > causes memory corruption leading to a quick crash, presumably because > the default stack is too small. > > We recommend that all users upgrade to a corrected version if at all > possible. Alternatively, if you want to apply a minimal fix to your own > tree, please find patches here: > > These should be trivial to backport to older versions by hand. > > As for workarounds, only clients in allow-from are able to trigger the > degraded service, so this should be limited to your userbase; further, > we recommend running your critical services under supervision such as > systemd, supervisord, daemontools, etc. > > We want to thank Aki Tuomi for noticing this in production, and then > digging until he got to the absolute bottom of what at the time > appeared to be a random and spurious failure. > > _______________________________________________ > Pdns-announce mailing list > Pdns-announce@...lman.powerdns.com > http://mailman.powerdns.com/mailman/listinfo/pdns-announce  Download attachment "signature.asc" of type "application/pgp-signature" bytes)  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      