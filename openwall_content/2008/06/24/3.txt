  oss-security - ruby regression (was: Re: [vendor-sec] Ruby memory corruption bugs  in array and string handling)            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [thread-next>] [day] [month] [year] [list]  Date: Tue, 24 Jun From: Jonathan Smith <smithj@...ethemallocs.com> To: Drew Yao <ayao@...le.com> CC: Vendor-Sec Distribution Vendors <vendor-sec@....de>,   oss-security@...ts.openwall.com Subject: ruby regression (was: Re: [vendor-sec] Ruby memory corruption bugs  in array and string handling)  -----BEGIN PGP SIGNED MESSAGE----- Hash:  Since this is public now, I'm CCing oss-security (and trimming the CC list of people known to be on that list).  My comments are inline...  Drew Yao wrote: > Also in case anyone was wondering about the comments on > >  > the ruby version that was released to fix these introduced a regression. >  > ruby -ve ’str = ; loop{ str << str ; puts str.size }’  The above command does crash for me using ruby on rPath Linux 2 or Foresight Linux 2. However, the test suite ("make test" in the build dir) passes. It was my understanding that the test suite should fail, given my reading of the forum thread linked to by the blog post Drew mentioned above:  > causes a crash with and  Where did you get The latest I see is which, according to upstream's advisory [1], fixes the security issues.  > That crash is fixed by this patch >  Applying that patch, the segfault does go away. I get another (presumably correct) error message: - -e:1:in `<<': string sizes too big (ArgumentError)         from -e:1         from -e:1:in `loop'         from -e:1   > This issue doesn't exist on versions of Ruby before the recent patches, > because in the old versions, str_buf_append didn't exist.  > rb_str_buf_append takes two RString pointers, so if str and str2 are the > same, when str->ptr gets realloced, str2->ptr also gets realloced.  This > also does not affect the patched version if you used the patches I sent > originally.  Thanks for the info.  [1]:  	smithj  -----BEGIN PGP SIGNATURE----- Version: GnuPG (GNU/Linux)  -----END PGP SIGNATURE-----  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      