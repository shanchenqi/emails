  oss-security - Re: Debian FEATURE: /home/loser is with permissions  default umask            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [<thread-prev] [day] [month] [year] [list]  Date: Mon, 12 Oct From: Eli Schwartz <eschwartz@...hlinux.org> To: oss-security@...ts.openwall.com Subject: Re: Debian FEATURE: /home/loser is with permissions  default umask  On PM, Solar Designer wrote: > Hi, >  > A problem with Georgi's message that started this thread, besides its > overall tone, is that it singled out Debian.  In my experience, most > Unix-like distributions use insecure defaults like this. >  > On Thu, Oct 08, at Brian May wrote: >> Jeremy Stanley <fungi@...goth.org> writes: >> >>> As a long-time Debian user myself, I agree that this default is >>> showing its age, and can represent a risk for operators who overlook >>> it. >> >> Yes, I agree the default should be changed. >  > I also think the defaults should be changed, and not only on Debian. >  > Special cases like serving web pages do not justify insecure default > home directory permissions - rather, they're reasons to provide extra > setup instructions in web server packages, etc.  https://wiki.archlinux.org/index.php/Access_Control_Lists#Granting_execution_permissions_for_private_files_to_a_web_server  This seems like a fairly solvable problem.  By default, Arch Linux's login.defs umask is so home directories created by useradd cannot be read at all by other users. (It is then overridden by /etc/profile to  >> Just note that there is a reasonable amount of software install >> instructions that assume umask is and will install software with >> unusable permissions if it is not. >  > This is indeed a problem.  When building software manually (not > packaged) and wanting to install it on a system globally (e.g., in > /usr/local), a workaround is to use "(umask make install)" - that > is, temporarily relax the umask to just for that one command by > running it in a subshell. >  > RPM typically invokes "umask for all(?) package build scripts, > including the %install section, which lets it build proper packages even > when run on a system with umask even when the packaged software's > install scripts assume umask >  > I think package install scripts should learn not to assume umask, or at > least not when installing software globally.  When installing to a > subdirectory of the user's home directory, it makes sense to honor the > user's umask, but those cases probably can't be recognized reliably. >  > It's a pity that software will just assume it's to be installed globally > (or with equivalent permissions), but the current reality is no better > where things break arbitrarily (e.g., some files mode some > when installing unprepared software with umask  It depends how the software is installed, surely? Some things use mkdir/cp, some use install (which defaults to  Some build systems, like meson, have a core setting for the installation umask, ignoring the process umask in favor of by default or whatever configuration option was passed.  > I think distros have to take the first step and change the default umask > to  Until enough distros do, software maintainers won't have the > incentive to support that or won't even know about the problem. >  > Alexander >    --  Eli Schwartz Arch Linux Bug Wrangler and Trusted User    Download attachment "signature.asc" of type "application/pgp-signature" bytes)  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      