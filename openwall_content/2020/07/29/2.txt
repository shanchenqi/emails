  oss-security - Re: Linux Kernel: buffer over write in vgacon_scrollback_update            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [<thread-prev] [thread-next>] [day] [month] [year] [list]  Date: Wed, 29 Jul From: Solar Designer <solar@...nwall.com> To: oss-security@...ts.openwall.com Cc: Yunhai Zhang <zhangyunhai@...ocus.com>, Jiri Slaby <jslaby@...e.cz> Subject: Re: Linux Kernel: buffer over write in vgacon_scrollback_update  On Tue, Jul 28, at Eric Biggers wrote: > On Tue, Jul 28, at ????????? wrote: > > There is a buffer over write in drivers/video/console/vgacon.c in > > vgacon_scrollback_update. > >  > > The issue is reported by Yunhai Zhang / NSFOCUS Security Team > > <zhangyunhai@...ocus.com>, assigned via Red Hat. > >  > > # Affected Versions > > The issue is found and tested on > > The issue is introduced in commit: > > ([PATCH] vgacon: Add support > > for soft scrollback)  That was in  > > According to code review, all versions older than > > are affected. >  > Thanks for the writeup.  Note that there are many open syzbot reports in the > fbdev, vt, and vgacon kernel subsystems.  These subsystems aren't actively > maintained (receiving drive-by fixes only), and the kernel developers recommend > to not enable these subsystems if you care about security > >  > This particular bug, for example, appears to have been already found by someone > running syzkaller and publicly reported over 2 years ago, with a C reproducer: > > No one did anything. >  > I suggest that people relying on the security of these kernel subsystems > contribute resources to fixing the many known fuzzing bugs in them.  Wow.  I suppose the biggest risk here is services that just happen to run on the console (or able to access it if they re-open /dev/tty) as a result of normal system startup.  Since an ioctl() is required at least to trigger at least this one is limited to attacks by someone who already got code execution within one of such services, but I suppose it could in some cases be used to gain ring 0 access from a non-root pseudo-user that the service (or even merely its privsep child) might run as.  If any other related issues are triggerable purely by terminal escapes codes, it's much worse - could even allow for remote attacks without a prior compromise of any service.  Do others see this same threat model or something different?  I think non-root users with intentional console access mounting attacks is less of a concern.  Meanwhile, Jiri Slaby brought the discussion around fixing vgacon properly to LKML:   The patch posted in this very first LKML message (with the added check before the loop) is already known to be insufficient - see the follow-ups.  The patch posted by Yunhai Zhang here on oss-security (with the added check in the loop) is still considered sufficient.  Alexander  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      