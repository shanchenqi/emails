  oss-security - Xen Security Advisory v2 - Special Register  Buffer speculative side channel            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [day] [month] [year] [list]  Date: Thu, 11 Jun From: Xen.org security team <security@....org> To: xen-announce@...ts.xen.org, xen-devel@...ts.xen.org,  xen-users@...ts.xen.org, oss-security@...ts.openwall.com CC: Xen.org security team <security-team-members@....org> Subject: Xen Security Advisory v2 - Special Register  Buffer speculative side channel  -----BEGIN PGP SIGNED MESSAGE----- Hash:              Xen Security Advisory /                               version 2             Special Register Buffer speculative side channel  UPDATES IN VERSION 2 ====================  Add a link to Intel's cross reference of affected hardware.  Provide a suggested workaround for Ivy Bridge hardware, which is not receiving a microcode update.  This includes a 3rd patch for each release.  ISSUE DESCRIPTION =================  This issue is related to the MDS and TAA vulnerabilities.  Please see (MDS) and (TAA) for details.  Certain processor operations microarchitecturally need to read data from outside the physical core (e.g. to communicate with the random number generator).  In some implementations, this operation is called a Special Register Read.  In some implementations, data are staged in a single shared buffer, and a full cache line at a time is returned to the core which made the Special Register Read.  On parts vulnerable to MFBDS or TAA, an attacker may be able to access stale data requested by other cores in the system.  For more details, see:     https://software.intel.com/security-software-guidance/processors-affected-transient-execution-attack-mitigation-product-cpu-model  IMPACT ======  An attacker, which could include a malicious untrusted user process on a trusted guest, or an untrusted guest, can sample the contents of certain off-core accesses by other cores in the system.  This can include data whose use may depend on the secrecy of the value, such as data from the Random Number Generator (e.g. RDRAND/RDSEED instructions).  VULNERABLE SYSTEMS ==================  Systems running all versions of Xen are affected.  Only x86 processors are vulnerable. ARM processors are not believed to be vulnerable.  Only Intel based processors are affected.  Processors from other manufacturers (e.g. AMD) are not believed to be vulnerable.  Please consult the Intel Security Advisory for details on the affected processors.  MITIGATION ==========  Disabling RDRAND (and, where applicable, RDSEED) will avoid the vulnerability.  It may have other adverse consequences, such as guests generating keys with weak random numbers, or guests hanging during boot waiting for entropy.  A domain (guest, dom0, or service domain) which is runs with RDRAND disabled in CPUID, and whose software conforms to normal feature detection as specified in the Intel/AMD manuals, will not be vulnerable to snooping by other domains.  But such a domain *can* still potentially snoop on any domains which are still using RDRAND.  This mitigation is recommended to be applied globally, due to the practical complexity of auditing all software in a VM to confirm that there are no vulnerable uses of the RDRAND/RDSEED instructions.  RDRAND and RDSEED can be disabled at the host level by booting Xen with `cpuid=no-rdrand,no-rdseed`, which will hide the feature from all domains including guests and dom0.  Xen and earlier require the appropriate patch 3 below for this mechanism to work.  RDRAND and RDSEED can be disabled for guests with the following setting in the VM configuration file (xl.cfg):   cpuid=["host:rdrand=0,rdseed=0]" (NB it would have to be merged into any existing cpuid= setting). Xen 4.9 and earlier require the appropriate patch 3 below for this mechanism to work.  RESOLUTION ==========  New microcode is being released on some affected parts to work around the vulnerability.  It may be available via a firmware update (consult your hardware vendor), or available for OS loading (consult your dom0 OS vendor).  For Ivy Bridge hardware, which is not receiving a microcode update, see MITIGATION, above.  On Xen and later, OS microcode can be loaded at runtime. See https://xenbits.xen.org/docs/latest/admin-guide/microcode-loading.html#runtime-microcode-loading for details on the xen-ucode utility.  Loading the microcode, either at boot or at runtime, suffices to mitigate the issue, as protections are active by default.  The mitigations do have an impact on latency of individual RDRAND/RDSEED instructions.  The patches below are for Xen, and offer boot time information, defaults selection, opt-out controls, and uniform controls for hiding the RDRAND/RDSEED instructions.  Note that patches for released versions are generally prepared to apply to the stable branches, and may not apply cleanly to the most recent release tarball.  Downstreams are encouraged to update to the tip of the stable branch before applying these patches.         xen-unstable   Xen   Xen   Xen   Xen    Xen 4.9.x  $                   $  NOTE REGARDING LACK OF EMBARGO ==============================  Despite an attempt to organise predisclosure, the discoverers ultimately did not authorise a predisclosure. -----BEGIN PGP SIGNATURE-----  =N8eC -----END PGP SIGNATURE-----  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Download attachment of type "application/octet-stream" bytes)  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      