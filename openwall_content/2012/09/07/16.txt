  oss-security - Re: [Xen-users] Xen Security Advisory 17 - Qemu  emulation vulnerability            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [<thread-prev] [day] [month] [year] [list]  Date: Fri, 07 Sep From: "Nathan March" <nathan@...net> To: "Xen.org security team" <security@....org>, xen-devel@...ts.xen.org,  xen-users@...ts.xen.org, oss-security@...ts.openwall.com Cc: "Xen.org security team" <security@....org> Subject: Re: [Xen-users] Xen Security Advisory 17 - Qemu  emulation vulnerability  ďťżHi All,  I'm guessing this wasn't intentional, but the patch for xsa17 does not  contain a complete path to the tools/ioemu-qemu-xen/ path:  --- a/console.c +++ b/console.c  Compared to all the other patches which provide a full path to the  patched file:  --- a/xen/include/asm-x86/debugreg.h Mon Aug 06 +++ b/xen/include/asm-x86/debugreg.h Wed Aug 15  Little annoying since it means you have to track down which console.c  is being patched instead of just applying from the root xen build dir.  - Nathan   ------ Original Message ------ From: "Xen.org security team" <security@....org> To:  xen-announce@...ts.xen.org;xen-devel@...ts.xen.org;xen-users@...ts.xen.org;oss-security@...ts.openwall.com Cc: "Xen.org security team" <security@....org> Sent: AM Subject: [Xen-users] Xen Security Advisory 17 - Qemu  emulation vulnerability >-----BEGIN PGP SIGNED MESSAGE----- >Hash: SHA1 > >           Xen Security Advisory / XSA-17 >                          version 2 > >              Qemu emulation vulnerability > >UPDATES IN VERSION 2 >==================== > >Public release. > >ISSUE DESCRIPTION >================= > >The device model used by fully virtualised (HVM) domains, qemu, does >not properly handle escape sequences when emulating certain >devices with a virtual console backend. > >IMPACT >====== > >An attacker who has sufficient privilege to access a vulnerable device >within a guest can overwrite portions of the device model's address >space. This can allow them to escalate their privileges to that of the >device model process. > >VULNERABLE SYSTEMS >================== > >All Xen systems running HVM guests are potentially vulnerable to this >depending on the specific guest configuration. The default >configuration is vulnerable. > >Guests using either the traditional "qemu-xen" or upstream qemu device >models are vulnerable. > >MITIGATION >========== > >This issue can be avoided by only running PV guests or by configuring >HVM guests to not use the virtual console('vc') backend for any device. > >For serial devices specify in your guest configuration: >    serial = 'none' >in your guest configuration. > >For parallel port devices the syntax is toolstack specific. >For xend specify in your guest configuration: >    parallel = 'none' >For xl specify in your guest configuration: >    xl: device_model_args = ['-parallel', 'none'] > >In both cases the default is to use the vulnerable 'vc' mode. > >You can confirm whether or not you are vulnerable by pressing >Ctrl-Alt-<N> (for digit N) while connected to either the VNC or SDL >console. If you are able to switch to a window displaying "serial" or >"parallel" then you are vulnerable. > >The issue can also be mitigated by enabling the stub domain device >model. In this case the attacked can only potentially gain control of >the stub domain and not of the entire system. > >To enable stub domains specify in your guest configuration: >   device_model = "stubdom-dm" > >RESOLUTION >========== > >Applying the appropriate attached patch(es) will resolve the issue. > >PATCH INFORMATION >================= > >The attached patches resolve this issue > >Traditional qemu tree >  Xen 4.0, 4.1 and unstable         xsa17-qemu-xen-traditional-all.patch > >Upstream qemu tree (present in unstable only) >  Xen unstable                      xsa17-qemu-xen-unstable.patch > >$ xsa17-*.patch  xsa17-qemu-xen-traditional-all.patch  xsa17-qemu-xen-unstable.patch >-----BEGIN PGP SIGNATURE----- >Version: GnuPG (GNU/Linux) > >=gnuE >-----END PGP SIGNATURE----- > >   Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      