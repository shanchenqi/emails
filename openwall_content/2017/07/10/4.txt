  oss-security - Re: global buffer overflow in III_i_stereo  (layer3.c)            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [<thread-prev] [thread-next>] [day] [month] [year] [list]  Date: Mon, 10 Jul From: "Dr. Thomas Orgis" <thomas.orgis@...-hamburg.de> To: oss-security@...ts.openwall.com Subject: Re: global buffer overflow in III_i_stereo  (layer3.c)  Am Mon, 10 Jul schrieb "Agostino Sarubbo" <ago@...too.org>:  > Description: > is a fast console MPEG Audio Player and decoder library. >  > The complete ASan output of the issue: >  > # -t $FILE > AddressSanitizer: global-buffer-overflow on address at pc bp sp > READ of size 4 at thread T0  I would like to point out that this only crashes with the AddressSanitizer. The normal effect is some bad values from adjacent data being used in numerical computation. No segfault or the like, no jumps depending on the values.  > Affected version: >  too  > Fixed version: > N/A  To be released, I hoped to also fix another lurking issue that in practice is hidden by padding of a buffer for alignment. If I don't manage that today, I guess I have to push out as-is.  > Commit fix: > N/A  It is fixed with subversion revision   Can this info be updated? Agostino: You might want to jump to too, as that fixes that other left shift of -1 complaint you had.  > CVE: >  Is this really worth a CVE, though? So far I was only able to see a crash triggered by the AddressSanitizer. Never from a normal build. So every build of in the wild, except for extremely hardened distros that build everything with GCC's sanitizers enabled for daily use, is not affected. Are people running binaries in production with the sanitizers on?  Thing about this specific kind of input: This is a fuzzed stream that triggers a code path for MP3 with intensity stereo. These are really hard to find and I was not able to produce a valid file (using the FhG mp3enc demo, the only encoder that does i-stereo to my knowledge) that also triggers this specific array access. So I cannot even say if this bug causes bad output from valid input as I never observed the valid input! For this fuzzed input data, the produced output data (sound) will not be nice, but this is the case with and without the fix.  It's hard to see a security issue here, although of course there technically is a buffer overflow. That is why I wanted to take some time to possibly dig out a file that tells me that is now producing correct output. So far, the overflow is averted, but if we do something sensible now cannot be tested in lack of valid test data that uses 5 bits for scale factors with intensity stereo.   Alrighty then,  Thomas  PS: I will do some fuzzing myself to weed out any lurking issues of this type. Found a fuzzer in my mailbox, from over 10 years ago, when this was a thing before;-)  --  Dr. Thomas Orgis UniversitĂ¤t Hamburg RRZ / Basis-Infrastruktur / HPC SchlĂźterstr. 70 Hamburg Tel.: Fax: 38  Download attachment "smime.p7s" of type "application/pkcs7-signature" bytes)  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      