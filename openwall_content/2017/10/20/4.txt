  oss-security - ffmpeg: Double free when ffmpeg parsing an craft  AVI file to MKV file using ffvhuff decoder            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [thread-next>] [day] [month] [year] [list]  Date: Fri, 20 Oct From: 连一汉 <lianyihan@....cn> To: "oss-security@...ts.openwall.com" <oss-security@...ts.openwall.com> Subject: ffmpeg: Double free when ffmpeg parsing an craft  AVI file to MKV file using ffvhuff decoder   Affected package: ffmpeg Affected versions: <=  FFmpeg trigger double-free when it parsing an craft AVI file to MKV file using ffvhuff decoder.  From the back trace, we can see that ffmpeg frees a filter array firstly:  #0  av_free at #1  in initFilter srcW=45, dstW=45, filterAlign=1,     srcFilter=0x0, dstFilter=0x0, at #2  in sws_init_context at #3  in config_props at #4  in avfilter_config_links at #5  in avfilter_config_links at #6  in graph_config_links log_ctx=0x0) at #7  in avfilter_graph_config log_ctx=0x0) at  But because of an error handing, this filter will be freed again when exit program:  #0  av_free at #1  in av_freep at #2  in buffer_pool_free (pool=0x0) at #3  in av_buffer_pool_uninit at #4  in ff_frame_pool_uninit at #5  in avfilter_link_free at #6  in free_link at #7  in avfilter_free at #8  in avfilter_graph_free at #9  in ffmpeg_cleanup (ret=0) at #10 in exit_program (ret=0) at  This was fixed with the following commit: https://www.ffmpeg.org/download.html#releases  Regards  Reported by Zhibin Hu and Yihan Lian from Qihoo GearTeam   Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      