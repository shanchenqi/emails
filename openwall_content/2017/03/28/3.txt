  oss-security - Re: LXC: lxc-user-nic didn't verify  network namespace ownership            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [<thread-prev] [day] [month] [year] [list]  Date: Tue, 28 Mar From: "Serge E. Hallyn" <serge@...lyn.com> To: oss-security@...ts.openwall.com Cc: 	StĂŠphane Graber <stgraber@...ntu.com>, 	serge.hallyn@...ntu.com Subject: Re: LXC: lxc-user-nic didn't verify  network namespace ownership  On Tue, Mar 28, at Stiepan wrote: > Thanks to the update by Evgeni Golov and his crystal-clear instructions on how to use lxcbr0 with this version, I could confirm that the issue with the host's routing table being affected by changes in the containers' routing tables is not there anymore when using that version (lxc from jessie-backports), which includes the fixes to which were brought in LXC (upstream). >  > This was thus basically a variation of said CVE, which probably doesn't need to be separately numbered as such, the core problem at stake being the same: > network namespace ownership was not respected by a setuid-root program enabling the user to configure networks as non-root, which is now solved. > This leads me to a suggestion to the upstream developers: couldn't the same be achieved using specific network-related capabilities, instead of setuid-root, thereby further reducing the risk of lxc-user-nic being exploited and hence, reducing overall attack surface (in unprivileged mode)? > I have read in https://wiki.ubuntu.com/UserNamespace that the approach of using "targeted capabilities" was then considered. This is probably the closest to what I am suggesting (specifically for lxc-user-nic - the current approach with 1-1 uid mappings seems fine for network-unrelated things).  The targeted capabilities wouldn't help here, because in fact lxc-user-nic requires privilege against the parent namespace.  -serge  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      