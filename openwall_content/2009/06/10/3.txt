  oss-security - Re: diff            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [<thread-prev] [thread-next>] [day] [month] [year] [list]  Date: Wed, 10 Jun From: Tomas Hoger <thoger@...hat.com> To: oss-security@...ts.openwall.com Cc: krahmer@...e.de Subject: Re: diff  Hi Sebastian!  On Mon, 8 Jun Sebastian Krahmer <krahmer@...e.de> wrote:  > just in case you need it, our maintainer asked me to forward > a patch for $SUBJECT which has been fixed in our xfig > for quite some time.  Looks like the patch you attached does not differ much from what we use for some time too and seems to have an origin here:     And it does not differ much from what Nico previously posted:     However, Nico's patch, probably taken from Fedora XFig packages, has one hunk missing for:  u_print.c:    sprintf(tmp_fig_file, "%s/%s%06d", TMPDIR, "xfig-fig", getpid());  that seem to have been lost during -> patch forward-porting.  This code is reached e.g. when you select File -> Print -> Print figure to batch.  I've also grepped source for other obvious TMPDIR uses and here's my list:  d_text.c:  sprintf(preedit_filename, "%s/%s%06d", TMPDIR, "xfig-preedit", getpid());  - This code if #ifdef I18N_USE_PREEDIT, though I do not see   I18N_USE_PREEDIT defined anywhere.  Does not seem to be used in our   builds.  f_util.c:     sprintf(tmpfile, "%s%s", TMPDIR, c); f_util.c:     sprintf(tmpfile, "%s/%s", TMPDIR, plainname);  - This can be triggered if user tries to open zipped file in some   directory where she can not write (it is used as "gunzip -c >   tmpfile").  Warning is printed when TMPDIR is used, but it's still   possible to perform symlink attack when victim can be tricked to open   some attacker chosen file.  u_error.c:      if (emergency_save(strcat(TMPDIR,"/SAVE.fig")) == -1)  - This is emergency auto-save feature, executed when xfig is signaled   or detect some X error.  Current directory is tried first, TMPDIR is   fallback when current directory fails.  The latter two are not really temp files, so mkstemp may not be the right fix here.  --  Tomas Hoger / Red Hat Security Response Team  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      