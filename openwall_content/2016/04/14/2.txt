  oss-security - Xen Security Advisory - hugetlbfs use may  crash PV Linux guests            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [day] [month] [year] [list]  Date: Thu, 14 Apr From: Xen.org security team <security@....org> To: xen-announce@...ts.xen.org, xen-devel@...ts.xen.org,  xen-users@...ts.xen.org, oss-security@...ts.openwall.com CC: Xen.org security team <security@....org> Subject: Xen Security Advisory - hugetlbfs use may  crash PV Linux guests  -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1              Xen Security Advisory /                               version 3                  hugetlbfs use may crash PV Linux guests  UPDATES IN VERSION 3 ====================  Public release.  ISSUE DESCRIPTION =================  Huge (2Mb) pages are generally unavailable to PV guests.  Since x86 Linux pvops-based kernels are generally multi purpose, they would normally be built with hugetlbfs support enabled.  Use of that functionality by an application in a PV guest would cause an infinite page fault loop, and an OOPS to occur upon an attempt to terminate the hung application.  IMPACT ======  Depending on the guest kernel configuration, the OOPS could result in a kernel crash (guest DoS).  VULNERABLE SYSTEMS ==================  All upstream x86 Linux versions operating as PV Xen guests are vulnerable.  ARM systems are not vulnerable.  x86 HVM guests are not vulnerable.  x86 Linux versions derived from (XenoLinux) are not vulnerable.  Oracle Unbreakable Enterprise Kernels are not vulnerable.  We believe that non-Linux guests are not vulnerable, as we are not aware of any with an analogous bug.  MITIGATION ==========  Running only HVM guests will avoid this issue.  Not enabling hugetlbfs use, by not altering the boot time default value of zero in /proc/sys/vm/nr_hugepages (which can only be written by the root user) will avoid this issue.  It is possible that disabling (or not enabling) the "panic on OOPS" behavior (via use of the "oops=panic" command line option or the "panic_on_oops" sysctl) will also avoid this issue, by limiting the effect to an application crash.  We are not currently sure whether this is an effective mitigation, as we are not sure whether any locks or mutexes are held at the point of the crash.  CREDITS =======  This issue was discovered by Vitaly Kuznetsov from Red Hat.  RESOLUTION ==========  Applying the attached patch resolves this issue.            Linux 4.5.x ...  $  $  DEPLOYMENT DURING EMBARGO =========================  Deployment of patches or mitigations is NOT permitted (except where all the affected systems and VMs are administered and used only by organisations which are members of the Xen Project Security Issues Predisclosure List).  Specifically, deployment on public cloud systems is NOT permitted.  This is because such host configuration changes would be user mode visible, which could lead to the rediscovery of the vulnerability.  But: Distribution of updated software is prohibited (except to other members of the predisclosure list).  Predisclosure list members who wish to deploy significantly different patches and/or mitigations, please contact the Xen Project Security Team.   (Note: this during-embargo deployment notice is retained in post-embargo publicly released Xen Project advisories, even though it is then no longer applicable.  This is to enable the community to have oversight of the Xen Project Security Team's decisionmaking.)  For more information about permissible uses of embargoed information, consult the Xen Project community's agreed Security Policy:   http://www.xenproject.org/security-policy.html -----BEGIN PGP SIGNATURE----- Version: GnuPG (GNU/Linux)  =u89I -----END PGP SIGNATURE-----  Download attachment of type "application/octet-stream" bytes)  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      