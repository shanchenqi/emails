  oss-security - Fwd: (Info Disclosure due to assert), Crypto++ and down  level remediation            Products  Openwall GNU/*/Linux   server OS Linux Kernel Runtime Guard John the Ripper   password cracker  Free & Open Source for any platform in the cloud Pro for Linux Pro for macOS  Wordlists   for password cracking passwdqc   policy enforcement  Free & Open Source for Unix Pro for Windows (Active Directory)  yescrypt   KDF & password hashing yespower   Proof-of-Work (PoW) crypt_blowfish   password hashing phpass   ditto in PHP tcb   better password shadowing Pluggable Authentication Modules scanlogd   port scan detector popa3d   tiny POP3 daemon blists   web interface to mailing lists msulogin   single user mode login php_mt_seed   mt_rand() cracker  Services Publications  Articles Presentations  Resources  Mailing lists Community wiki Source code repositories (GitHub) Source code repositories (CVSweb) File archive & mirrors How to verify digital signatures OVE IDs  What's new         Follow @Openwall on Twitter for new release announcements and other news   [<prev] [next>] [day] [month] [year] [list]  Date: Mon, 19 Sep From: Jeffrey Walton <noloader@...il.com> To: oss-security@...ts.openwall.com Subject: Fwd: (Info Disclosure due to assert), Crypto++ and down  level remediation  ---------- Forwarded message ---------- From: Jeffrey Walton <noloader@...il.com> Date: Mon, Sep 19, at AM Subject: (Info Disclosure due to assert), Crypto++ and down level remediation To: <redacted; maintainers and distros>  Hi Everyone,  Crypto++ will be released within a month or so to remediate the information disclosure from Distros will need to patch Crypto++ and below. The following provides more information and procedures we recommend for down level Crypto++.  We re-engieered the "debugging and diagnostic" support area because documenting the behaviors did *not* reduce the risk; rather it simply moved the blame around. You can see the staged changes at .  We believe the best course of action for a distor is to make the asserts inert in Crypto++ and below because they are expected to be removed by NDEBUG. However and simple sed and 's|<exp>||g' won't work as expected.  If you have any problems or questions, then please email me or call me. My cell number is <redacted>. My home number is <redacted>. Distros get special treatment because they are so important to the ecosystem.  My apologies for the inconvenience and trouble this has caused.  Jeff  **********  To remediate in Crypto++ and below, perform the following.  1. Crypto++ and below (Crypto++ and has it, so skip this step).      (a) Add CRYPTOPP_UNSED macro to config.h       #define CRYPTOPP_UNSED(x) ((void)(x))  2. Change every assert() to CRYPTOPP_UNUSED()      (a) replace en masse     (b) find with sed or grep and 'assert[[:space:]]*('  3. Verify changes      (a) cat *.h *.cpp | egrep -v '(<|>|//)' | grep assert     (b) should only see compile-time assert  4. Test changes      (a) 'make clean && make -j 4'     (b) './cryptest.exe v'  5. Update the package      (a) rebuild the library and package it           - all asserts rendered inert     (b) rebuild all dependent packages           - asserts in Crypto++ headers could cross-pollinate  **********  Procedures performed on Crypto++  # Prepare $ git clone https://github.com/weidai11/cryptopp cryptopp-assert $ cd cryptopp-assert $ git checkout  # Step 1 (Add) $ echo "#define CRYPTOPP_UNUSED(x) ((void)(x))" >> config.h  # Step 2 (Replace) $ sed -i "" 's|assert[[:space:]]*(|CRYPTOPP_UNUSED(|g' *.h *.cpp  # Step 3 (Verify) $ cat *.h *.cpp | egrep -v '(<|>|//)' | grep assert #define CRYPTOPP_COMPILE_ASSERT(assertion) CRYPTOPP_COMPILE_ASSERT_INSTANCE(assertion, __LINE__) #define CRYPTOPP_COMPILE_ASSERT_INSTANCE(assertion, instance)  # Step 4 (Test) $ make clean && make -j 4 $ ./cryptest.exe v   # Tail should report no failures  # Step 5 (Repackage) ...  Powered by blists - more mailing lists  Please check out the  Open Source Software Security Wiki, which is counterpart to this mailing list.  Confused about mailing lists and their use? Read about mailing lists on Wikipedia and check out these guidelines on proper formatting of your messages.      